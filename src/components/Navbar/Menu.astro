---
import CloseMenu from "../../icons/CloseMenu.astro";
import MenuIcon from "../../icons/Menu.astro";
import IconSwap from "../IconSwap.astro";
import styles from './styles.module.css'
---
<div class="dropdown">
  <button 
    role="img" 
    aria-label="Menu" 
    type="button"
    data-button="menu"
    class="md:hidden btn btn-ghost"
  >
    <label class="swap">
      <input type="checkbox">
      <IconSwap>
        <MenuIcon />
      </IconSwap>
      <IconSwap on>
        <CloseMenu />
      </IconSwap> 
    </label>
  </button>
  <ul class={`dropdown-content hidden max-w-md menu bg-zinc-700 ${styles.navbarMenu}`} >
    <li>sada</li>
  </ul>
</div>



<script>
  import { $ } from '../../ts/utils/selectors'
  import { clickHandle } from './main'

  const dropdown = $('.dropdown')
  const events = ['click', 'focusout']
  let isClosed = true

  events
    .forEach((eventType: string) => {
      dropdown?.addEventListener(eventType, function(this: Element, event){
        isClosed = !isClosed
        
        event.preventDefault()

        if(!isClosed && eventType === 'focusout')
          return

        clickHandle(this)
        $('.dropdown-content')?.classList.toggle('hidden')
      })
    })
</script>
